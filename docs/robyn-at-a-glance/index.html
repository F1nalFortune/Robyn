<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-TMZK4YFDGL","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TMZK4YFDGL"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TMZK4YFDGL",{anonymize_ip:!0})</script><title data-react-helmet="true">Core capabilities | Robyn</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://facebookexperimental.github.io/Robyn/docs/robyn-at-a-glance"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Core capabilities | Robyn"><meta data-react-helmet="true" name="description" content="Model flow"><meta data-react-helmet="true" property="og:description" content="Model flow"><link data-react-helmet="true" rel="shortcut icon" href="/Robyn/img/robyn_logo.png"><link data-react-helmet="true" rel="canonical" href="https://facebookexperimental.github.io/Robyn/docs/robyn-at-a-glance"><link data-react-helmet="true" rel="alternate" href="https://facebookexperimental.github.io/Robyn/docs/robyn-at-a-glance" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://facebookexperimental.github.io/Robyn/docs/robyn-at-a-glance" hreflang="x-default"><link rel="stylesheet" href="/Robyn/assets/css/styles.e77be50e.css">
<link rel="preload" href="/Robyn/assets/js/runtime~main.30fdf14c.js" as="script">
<link rel="preload" href="/Robyn/assets/js/main.0ba7addf.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" style="background-color:#20232a;color:#fff" role="banner"><div class="announcementBarContent_3EUC">Support Ukraine ðŸ‡ºðŸ‡¦ <a target="_blank" rel="noopener noreferrer" href="https://opensource.facebook.com/support-ukraine"> Help Provide Humanitarian Aid to Ukraine</a>.</div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Robyn/"><img src="/Robyn/img/robyn_logo.png" alt="Robyn Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/Robyn/img/robyn_logo.png" alt="Robyn Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Robyn</b></a><a class="navbar__item navbar__link" href="/Robyn/docs/quick-start/">Docs</a><a class="navbar__item navbar__link" href="/Robyn/docs/about">About</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebookexperimental/Robyn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">How-to guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Robyn at a glance</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Robyn/docs/robyn-at-a-glance">Core capabilities</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Robyn/docs/example-plots">Example plots</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Analysts guide to MMM</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Features</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting help and contributing</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">About Robyn</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Core capabilities</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="model-flow"></a>Model flow<a class="hash-link" href="#model-flow" title="Direct link to heading">#</a></h2><img alt="inst folder" src="/Robyn/img/model-flow.png"><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="core-capabilities"></a>Core capabilities<a class="hash-link" href="#core-capabilities" title="Direct link to heading">#</a></h2><ul><li><strong>Semi-automated modelling process:</strong> Robyn automatically returns a set of business-relevant and statistically robust model solutions. Robyn does so by sampling all possible adstock and saturation curves combinations and minimizing the normalized root-mean-square error (NRMSE), decomposition root-sum-square distance (DECOMP.RSSD) &amp; calibration mean average percentage error (MAPE.LIFT). Building MMM manually is a time-consuming process that involves subjective decisions based on analystsâ€™ modeling experience and trial and error over hundreds of iterations. Sometimes months of effort are a common requirement to build classic MMMs from scratch. Please find our case study with Resident <a href="https://www.facebook.com/business/success/resident" target="_blank" rel="noopener noreferrer">here</a></li><li><strong>Continuous reporting:</strong> After an initial model is built and selected, the new <code>robyn_refresh()</code> function is able to continuously build and add new model periods, at any given cadence (weeks, months, etc.), based on previous model results. This capability enables using MMM as a continuous reporting tool which enables timely and actionable decision-making.</li><li><strong>Trend, seasonality and holidays automated decomposition:</strong> Robyn leverages <a href="https://facebook.github.io/prophet/" target="_blank" rel="noopener noreferrer">Prophet</a>, Facebook&#x27;s open source ML library for time series forecasting. We use Prophet to automatically decompose the trend, seasonality and holidays effects directly from the response as input variables for further modeling. This capability often increases model fit and reduces autoregressive patterns in residuals.</li><li><strong>Rolling window:</strong> Robyn allows users to specify <code>window_start</code> and <code>window_end</code> dates in the <code>robyn_inputs()</code> function to define a modeling period as a subset of the total available data for media and other variables. This feature allows for example, to define a recent modeling period, i.e. last 6 months. This allows relevant and up-to-date decision-making, based on media and other variable data that can be more relevant and better represent your business and marketing investment mix. At the same time, trend, seasonality and holiday effects will still be decomposed from the entire uploaded dataset capturing effects from the full data history.</li><li><strong>Granular datasets:</strong> Robyn is able to deal with large datasets and multicollinearity. In marketing, it is common to have similar spend patterns between Marketing channels, for example, increasing spend for multiple channels during Black Friday. Robyn uses Ridge regression to deal with the inherent multicollinearity, it defines predictors contribution by applying a penalization score, and prevents overfitting without the need to do computationally intensive time-series cross validation.</li><li><strong>Organic media:</strong> Robyn enables users to specify <code>organic_vars</code> to model marketing activities without direct spend. Typically, this may include newsletter, push notification, social media posts, among other efforts. Moreover, organic variables are expected to have similar carryover (adstock) and saturating behavior as paid media variables. The respective transformation techniques such as geometric or Weibull transformation for adstock; or Hill transformation for saturation, are also applied to organic variables.</li><li><strong>Experimental calibration:</strong> We believe integrating results from causal experiments into MMM is the best choice for model selection. As the general aphorism in statistics is &quot;all models are wrong but some are useful&quot;, there is no more reliable way to select final MMM results than the one of experiments that measure the causal effect of each channelâ€™s ad exposure. Common experimental tools include techniques like <a href="https://www.facebook.com/business/m/one-sheeters/conversion-lift" target="_blank" rel="noopener noreferrer">Facebook Conversion Lift</a> and geo-based techniques like <a href="https://github.com/ArturoEsquerra/GeoLift/" target="_blank" rel="noopener noreferrer">Facebook GeoLift</a>, among others. Robyn drives model results closer to experimental results by using MAPE.LIFT as the third Nevergrad algorithm objective function besides NRMSE &amp; DECOMP.RSSD when calibrating and minimizing the error between predicted and experimental results.</li><li><strong>Variable transformations:</strong><ul><li><strong>Custom adstock:</strong> Robyn offers the one-parametric Geometric function and the two-parametric Weibull function as adstock options to enable more customization and flexibility in adstock transformation. While the Geometric adstock is considered more intuitive and runs faster, the Weibull adstock is not only more flexible, but often more suitable for digital media transformation, as shown in this <a href="https://github.com/annalectnl/weibull-adstock/blob/master/adstock_weibull_annalect.pdf" target="_blank" rel="noopener noreferrer">study</a>.</li><li><strong>S-shape saturation:</strong> Robyn uses the two-parametric Hill function that is able to transform the relationship between ad exposure (or spend) with the response variable (Sales, conversions, etc.). It can adopt C- and S-shapes to enable more flexibility in the transformation.</li></ul></li><li><strong>Budget allocator:</strong> Based on a selected model, and using the corresponding saturation curve of each paid media variable, the <code>robyn_allocator()</code> function returns the optimal mix of spend that maximizes the total response. Robyn uses, by default, a combination of an Augmented Lagrangian (AUGLAG) global optimization algorithm and a Sequential Least Square Quadratic Programming (SLSQP) as a local optimization algorithm to solve the nonlinear objective function analytically.</li><li><strong>Automated output:</strong> When using <code>robyn_run()</code> function to build the initial model, Robyn outputs a one-pager that contains 6 charts for every Pareto-optimal model and saves 4 csv-files (pareto_hyperparameters.csv, pareto_aggregated.csv, pareto_media_transform_matrix.csv, pareto_alldecomp_matrix.csv) that contains all results. The 6 charts are: the effect decomposition waterfall chart, the actual vs. predicted fit line chart, the media spend vs. effect bar chart, the media saturation line chart, the adstock decay rate bar chart and the predicted vs. residual line chart. When using <code>robyn_refresh()</code> function to build refresh models, Robyn outputs 2 extra charts (aggregated actual vs. predicted line chart and aggregated decomposition bar chart) and saves 4 extra csv-files separately (report_hyperparameters.csv, report_aggregated.csv, report_media_transform_matrix.csv, report_alldecomp_matrix.csv).</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebookexperimental/Robyn/docs/robyn-at-a-glance.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Robyn/docs/step-by-step-videos"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Walkthrough videos</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Robyn/docs/example-plots"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Example plots Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#model-flow" class="table-of-contents__link">Model flow</a></li><li><a href="#core-capabilities" class="table-of-contents__link">Core capabilities</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebookexperimental/Robyn" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.facebook.com/business/success/resident" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Case study: Resident<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.facebook.com/business/success/central-retail-corporation" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Case study: Central Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://www.facebook.com/groups/954715125296621" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Robyn MMM Users Facebook Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/facebookexperimental/Robyn/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Raise an issue on Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/Robyn/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/Robyn/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2022 Facebook, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/Robyn/assets/js/runtime~main.30fdf14c.js"></script>
<script src="/Robyn/assets/js/main.0ba7addf.js"></script>
</body>
</html>