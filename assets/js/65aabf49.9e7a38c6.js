"use strict";(self.webpackChunkmmm_for_all=self.webpackChunkmmm_for_all||[]).push([[510],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return c}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),d=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=d(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),f=d(n),c=o,h=f["".concat(s,".").concat(c)]||f[c]||p[c]||i;return n?r.createElement(h,a(a({ref:t},u),{},{components:n})):r.createElement(h,a({ref:t},u))}));function c(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=f;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,a[1]=l;for(var d=2;d<i;d++)a[d]=n[d];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},3919:function(e,t,n){function r(e){return!0===/^(\w*:|\/\/)/.test(e)}function o(e){return void 0!==e&&!r(e)}n.d(t,{b:function(){return r},Z:function(){return o}})},4996:function(e,t,n){n.d(t,{C:function(){return i},Z:function(){return a}});var r=n(2263),o=n(3919);function i(){var e=(0,r.Z)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?"/":t,i=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,r){var i=void 0===r?{}:r,a=i.forcePrependBaseUrl,l=void 0!==a&&a,s=i.absolute,d=void 0!==s&&s;if(!n)return n;if(n.startsWith("#"))return n;if((0,o.b)(n))return n;if(l)return t+n;var u=n.startsWith(t)?n:t+n.replace(/^\//,"");return d?e+u:u}(i,n,e,t)}}}function a(e,t){return void 0===t&&(t={}),(0,i().withBaseUrl)(e,t)}},9089:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return d},metadata:function(){return u},toc:function(){return p},default:function(){return c}});var r=n(7462),o=n(3366),i=(n(7294),n(3905)),a=n(4996),l=["components"],s={id:"refresh",title:"Continuous reporting"},d="Continuous reporting",u={unversionedId:"refresh",id:"refresh",isDocsHomePage:!1,title:"Continuous reporting",description:"---",source:"@site/docs/refresh.mdx",sourceDirName:".",slug:"/refresh",permalink:"/Robyn/docs/refresh",editUrl:"https://github.com/facebookexperimental/Robyn/edit/main/website/docs/refresh.mdx",tags:[],version:"current",frontMatter:{id:"refresh",title:"Continuous reporting"},sidebar:"someSidebar",previous:{title:"Modeling window",permalink:"/Robyn/docs/window"},next:{title:"Organic media",permalink:"/Robyn/docs/organic-media"}},p=[],f={toc:p};function c(e){var t=e.components,n=(0,o.Z)(e,l);return(0,i.kt)("wrapper",(0,r.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"continuous-reporting"},"Continuous reporting"),(0,i.kt)("hr",null),(0,i.kt)("p",null,"Another strong capability requirement linked to the model window we identified, is the ability to refresh the model when new data would arrive. In other words, to be able to continuously report in a monthly, weekly or even daily frequency, based on a previously selected model but applied onto new fresh data. Consequently, enabling MMM to be a continuous reporting tool for actionable and timely decision-making that could feed your reporting or BI tools within the defined cadence."),(0,i.kt)("p",null,"The new ",(0,i.kt)("inlineCode",{parentName:"p"},"robyn_refresh()")," function is able to continuously build and add new model periods, at any given cadence (weeks, months, etc.), based on previously selected models saved in the Robyn.RData object specified in the robyn_object."),(0,i.kt)("p",null,"For example, when updating the initial build with 4 weeks of new data, robyn_refresh() consumes the selected model of the initial build. What Robyn does is to set lower and upper bounds of hyperparameters for the new build which are consistent with the selected hyperparameters of the previous build. Therefore, stabilizing the effect of contextual and organic variables across old and new builds as well as, regulating the new share of effect of media variables towards the new added period spend level. Finally, returning aggregated results containing all previous builds for reporting purposes and their corresponding plots."),(0,i.kt)("hr",null),(0,i.kt)("p",null,"The example below shows the model refreshing mechanism for 5 different periods of time based in an initial window covering most of 2017 and 2018:"),(0,i.kt)("img",{alt:"pareto chart 2",src:(0,a.Z)("/img/refresh-window.png")}),(0,i.kt)("hr",null),(0,i.kt)("p",null,"You will also obtain a set of results for each refresh period that describes the assigned ROI and effects from each of the variables within the model. The baseline variable is the sum of all prophet variables (trend, seasonality, weekday and holiday) plus the intercept. The charts are based on simulated and do not have real-life implication:"),(0,i.kt)("img",{alt:"pareto chart 2",src:(0,a.Z)("/img/refresh-reporting.png")}),(0,i.kt)("hr",null),(0,i.kt)("h4",{id:"robyn_refresh-description"},(0,i.kt)("inlineCode",{parentName:"h4"},"robyn_refresh()")," description"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"robyn_refresh()")," function builds updated models based on the previously built models saved in the Robyn.RData object specified in robyn_object.\nFor example, when updating the initial build with 4 weeks of new data, ",(0,i.kt)("inlineCode",{parentName:"p"},"robyn_refresh()")," consumes the selected model of the initial build."),(0,i.kt)("p",null,"What Robyn does, is to set lower and upper bounds of hyperparameters for the new build around the selected hyperparameters of the previous build,\nstabilizes the effect of baseline variables across old and new builds and regulates the new effect share of media variables towards the latest spend level.\nIt returns aggregated results with all previous builds for reporting purposes and produces reporting plots."),(0,i.kt)("hr",null),(0,i.kt)("h4",{id:"robyn_refresh-usage"},(0,i.kt)("inlineCode",{parentName:"h4"},"robyn_refresh()")," usage"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'robyn_refresh(\n  robyn_object,\n  dt_input = dt_input,\n  dt_holidays = dt_holidays,\n  refresh_steps = 4,\n  refresh_mode = "manual",\n  refresh_iters = 1000,\n  refresh_trials = 3,\n  plot_pareto = TRUE\n)\n')),(0,i.kt)("hr",null),(0,i.kt)("h4",{id:"robyn_refresh-arguments"},(0,i.kt)("inlineCode",{parentName:"h4"},"robyn_refresh()")," arguments"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"robyn_object")),"\nA character. Path of the ",(0,i.kt)("inlineCode",{parentName:"li"},"Robyn.RData")," object that contains all previous modeling information."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"dt_input")),"\nA data.frame. It should include all previous data and newly added data for the refresh."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"dt_holidays")),"\nA data.frame. Raw input holiday data. Load standard Prophet holidays using ",(0,i.kt)("inlineCode",{parentName:"li"},'data("dt_prophet_holidays")'),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"refresh_steps")),"\nAn integer. It controls how many time units the refresh model build will move forward. For example, ",(0,i.kt)("inlineCode",{parentName:"li"},"refresh_steps = 4")," on weekly data means the ",(0,i.kt)("inlineCode",{parentName:"li"},"InputCollect$window_start")," & ",(0,i.kt)("inlineCode",{parentName:"li"},"InputCollect$window_end")," will move forward 4 weeks."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"refresh_mode")),'\nA character. Options are "auto" and "manual". In auto mode, the ',(0,i.kt)("inlineCode",{parentName:"li"},"robyn_refresh()")," function builds refresh models following given ",(0,i.kt)("inlineCode",{parentName:"li"},"refresh_steps")," repeatedly until there is no more data available. In manual mode, the ",(0,i.kt)("inlineCode",{parentName:"li"},"robyn_refresh()")," moves forward the ",(0,i.kt)("inlineCode",{parentName:"li"},"refresh_steps")," only once."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"refresh_iters")),"\nAn integer. The number of iterations per refresh. The rule of thumb is, the more new data added, the more iterations needed."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"refresh_trials")),"\nAn integer. The number of trials per refresh. Defaults to 5 trials."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"plot_pareto")),"\nA logical value. Set it to FALSE to deactivate plotting and saving model onepagers, commonly used when testing models.")),(0,i.kt)("hr",null))}c.isMDXComponent=!0}}]);